此功能最低要求 1.1.2.5005 版本，如低于此版本，[请升级](http://ksria.com/simpread/) 到最新版本。
***

含义
---
[智能适配模式](智能适配模式) 升级为全新的 `词法分析引擎` 2.0 版本。

识别范围
---

- Wordpress · Hexo · Ghost · Discuz 等博客 / 论坛的页面
- LaTeX 解析 · TXT 格式 · Markdown 格式 · 代码段
- 2.2.0 版增加了 **读取本地 HTML** 功能
- 智能修复某些图片被错误居中的情况
- 智能识别图片的相对地址
- 智能去掉一些无用的多余空行

选项
---

![Xnip2019-05-10_09-39-20.jpg](https://i.loli.net/2019/05/10/5cd4d655a00f8.jpg)

1. 可关闭此功能，关闭后使用 1.1.2.1025（即上个版本，原来的解析方案）

2. 关闭后，将不会对 [代码段](词法分析引擎?id=代码段的高亮) `去除空格` 等做二次优化，如果你经常浏览的页面有代码段不佳的情况，请关闭此选项。

如何关闭
---

> 由于当前处于测试版，在某些极端条件下疑似会出现问题，因此可将其手动关闭。

> 选项页 → 高级设定 → 词法分析引擎 关闭选项即可

![词法分析引擎](https://i.loli.net/2019/05/06/5ccfb1b159bb9.jpg)

预加载机制
---

> 此功能最低要求 1.1.3 版本，如低于此版本，[请升级](http://ksria.com/simpread/) 到最新版本。

![Xnip2019-06-27_10-14-43.png](https://i.loli.net/2019/06/27/5d14269d3a89c17689.png)

简悦使用了 **预加载机制**，即：**当页面完整加载后，简悦会自动检索页面结构**，以便生成标题、描述、正文这些内容。这样会加快进入阅读模式的速度。

但是，在某些极端的情况下（如：Chrome 安装了太多的扩展；系统性能不高）会增加 **打开新标签页到加载完毕后** 的速度。

所以，增加了此选项。关闭此选项后，简悦默认只有在进入阅读模式时才启用词法分析引擎。

但是，除非用户不经常使用，否则的话，不建议开启此功能。如果仍存在上述问题的话，可以使用下面的功能。

延迟加载
---

> 此功能最低要求 1.1.3 版本，如低于此版本，[请升级](http://ksria.com/simpread/) 到最新版本。

![Xnip2019-06-27_10-30-51.png](https://i.loli.net/2019/06/27/5d142a6688dd190041.png)

> 此功能需要开启 **预加载机制** 后才能使用。

> 与 [排除列表](排除列表) 或 [黑名单](黑名单) 机制类似，加入到此列表中的网址将不会使用预加载机制。

> 支持 **主域名** 或 **具体 URL** 例如 youtube.com blog.csdn.net https://sspai.com/post/39491

#### 注意

- 延迟加载的优先级 > 排除列表 （ 即：加入此表的 URL 将不会具有自动进入阅读模式的功能；

- 延迟加载的优先级 < 黑名单

- 延迟加载专门适合 `动态加载的页面` 例如：小众软件、 **含有 LaTeX 的** 页面，这部分的说明 [请看这里](https://github.com/Kenshin/simpread/issues/534)

***

> 以下是词法分析引擎可以识别的模式

***

智能感知
---
> 此功能最低要求 1.1.3 版本，如低于此版本，[请升级](http://ksria.com/simpread/) 到最新版本。

> 词法分析引擎会自动判断当前的正文是否符合预期，当某个页面在适配列表中，但页面结构改变导致适配失败后，会启用此功能，重新获取正文。

![2019-06-27_12-20-08.gif](https://i.loli.net/2019/06/27/5d14442863ac992792.gif)

TXT 识别
---
详细请看 [TXT-阅读器](TXT-阅读器)

LaTeX 识别
---

应该是 **第一个** 支持  LaTeX 的阅读模式，确保安装此版本后，访问 <http://akosiorek.github.io/ml/2017/10/14/visual-attention.html> 点击右上角红色 icon 或 快捷键，即可进入含有 LaTeX 公式的页面，如下图：

![](https://i.loli.net/2019/05/06/5ccfb7270f4db.jpg)

词法分析引擎做了如下的事情：

- 判断当前页面是否已在适配列表中；
- 自动提取当前页面的正文；
- 自动识别当前页面是否是 LaTeX 类型的页面；

Markdown 识别
---

它可以识别出 Markdown 语法，例如 <https://github.com/Kenshin/simpread/raw/master/README.md> 会自动生成解析后的页面，但类似 https://github.com/Kenshin/simpread/blob/master/README.md 依旧按照普通页面阅读模式的适配。

除此以外，还可以将本地的 Markdown 文件直接拖到 Chrome 进行识别。

代码段的高亮
---

因为不同的页面会有不同的语法高亮规则，所以在生成阅读模式的时候，会出现一些排版不佳的情况，词法分析引擎 会对当前正文进行重新整理和排版，也包括 `<pre><code>xxx</code></pre>`

生成的页面，大致是如下效果：

![](https://i.loli.net/2019/05/06/5ccfce436128e.jpg)

辅以 [代码高亮](https://simpread.ksria.cn/plugins/details/klGUASLasg) 插件，会得到漂亮、易于阅读的页面，如下图：

![Xnip2019-05-06_14-02-32.jpg](https://i.loli.net/2019/05/06/5ccfce03072e3.jpg)